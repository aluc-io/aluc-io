<!DOCTYPE html>
<html>
  <head>
    <title>slide-serverless</title>
    <meta charset="utf-8">
    <meta property="og:url" content="https://b6pzeusbc54tvhw5jgpyw8pwz2x6gs.github.io/slide-serverless"/>
    <meta property="og:title" content="slide-serverless" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="slide about serverless" />
    <link href="./css/Lato-Nanum-Gothic.css" rel="stylesheet">
    <link href="./css/Yanone-Kaffeesatz.css" rel="stylesheet">
    <link href="./css/Droid-Serif-400-700-400italic.css" rel="stylesheet">
    <link href="./css/Ubuntu-Mono-400-700-400italic.css" rel="stylesheet">
    <link href="./css/notosanskr.css" rel="stylesheet">
    <link href="./css/user.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <textarea id="source">

layout: false

class: page-10

## ê²°ì •í•˜ê¸° ì „ ì•Œì•„ë‘ë©´ ì¢‹ì€
### GitLabCI vs CircleCI

.logo-wrapper.right.right-bottom.list-unstyled[
- [https://aluc.io](https://aluc.io)
- [me@aluc.io](mailto:me@aluc.io)
]

---

# Who am I

```
- nickname: aluc
- name:
    ko: ìœ  ë³‘í™”
    en: Alfreduc You
- job:
    - ì„œë²„ ê°œë°œ
    - Web Frontend ê°œë°œ
    - Cloud Native Application ê°œë°œ
- blog: https://aluc.io/
- I like ${ }
    - MacOS > Ubuntu >>> Windows
    - Stateless > Stateful
    - Serverless > Container >>> other
    - IaS >>> Web Console
    - React > Vue > Angular
    - typescript >> javascript
    - Slack > Mattermost
    - Automatic Car > Manual Car
    - VS Code > Vim >>> Eclipse
    - gitlab > github
    - CircleCI > GitlabCI > Jenkins
```

---

# TOC

- GitLabCI, CircleCI ì†Œê°œ
- Architecture
- VM or Physical Server Management
- Available Executor
- Configuring file
- Auto completion & validation check
- Lint
- GitLabCI to CircleCI Migration docs

## ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±
- Hello world

- Scripts ì‘ì„±
    - í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬
    - 

---

# ì†Œê°œ

## GitlabCI
- With GitLab - https://gitlab.com/gitlab-org/gitlab-runner
- SaaS and Enterprise, Self-Managed
- 2011: Start of GitLab
- 2012ë…„ 11ì›” November first version of GitLab CI
- Big Breaking Change: 2015ë…„ 9ì›” 22ì¼ GitLab 8.0 ë¶€í„° GitLab í”„ë¡œì íŠ¸ì™€ í†µí•©

## CircleCI
- Support github, github enterprise, bitbucket
- Saas and Enterprise
- 2016ë…„ 5ì›” 12ì¼ 0.2.36 release
- Big Breaking Change: 2017ë…„ 9ì›” 6ì¼ 2.0 ë²„ì „ release

.footnote[.text[GitLbCIì™€ CircleCIë¥¼ ì†Œê°œí•©ë‹ˆë‹¤]]

---

class: scroll

# GitLabCI ì•„í‚¤í…ì³
![](./img/ci-cd-architecture_2x.png)

# CircleCI ì•„í‚¤í…ì³
![](./img/ccie_arch.png)

.footnote[.text[ê°€ì¥ í° ì°¨ì´ëŠ” GitLabCIëŠ” polling ë°©ì‹, CircleCIëŠ” github application í˜•íƒœì˜ webhook ë°©ì‹ì…ë‹ˆë‹¤]]

---

class: scroll

# VM or Physical Server Management

## GitLabCI
- Shared Runners: Managed by system admin
- Group Runners, Specific Runners: Self-hosted
- Shared Runnersê°€ ì—†ê±°ë‚˜ DinD, DooD, private registry ì‚¬ìš© ê¸°ëŠ¥ ë“±ì„ ì§€ì›í•´ì£¼ì§€ ì•ŠëŠ”ë‹¤ë©´,
  í•  ìˆ˜ ì—†ì´ Self-hosted ë°©ì‹ì„ ì‚¬ìš©í•´ì•¼í•¨.
    - (Self-hosted) gitlab-runnerê°€ êµ¬ë™ë˜ëŠ” VMì´ë‚˜ ë¬¼ë¦¬ë¨¸ì‹ ì„ ê´€ë¦¬í•´ì•¼í•¨.
    - gitlab-runnerë¥¼ ê´€ë¦¬í•´ì•¼í•¨.
- `tags` í”„ë¡œí¼í‹°ë¥¼ í†µí•´ ëŸ¬ë„ˆë¥¼ ì„ íƒ. ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±ìê°€ ëŸ¬ë„ˆ êµ¬ì„±ì„ ì•Œì•„ì•¼í•¨.

## CircleCI
- GitHub, CircleCI ëª¨ë‘ system admin ì´ ë‹´ë‹¹.
- ê°œë°œìê°€ Self-hostedë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” VMì´ë‚˜ ë¬¼ë¦¬ë¨¸ì‹ ì´ ì—†ìŒ.

## Thinking
- ìŠ¬ë¼ì´ë“œì—ì„œëŠ” ì„œë²„ ê°œë°œìë¡œì„œ gitlab-ci Self-hosted runners ì‚¬ìš© ê²½í—˜ì„ ê¸°ì¤€ìœ¼ë¡œ ë¹„êµ.
- Self-hosted ë¨¸ì‹  ì‚¬ìš©ì€ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ ê°€ëŠ¥í•˜ì—¬ ê°€ëŠ¥ì„±ì´ ë¬´ê¶ ë¬´ì§„í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ,
- ìš´ì˜íŒ€ì´ ì•„ë‹Œ ì¼ë°˜ ê°œë°œìê°€ gitlab-runnerë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì˜ ê´€ë¦¬í•´ë³´ê³  ì‹¶ì€ ìœ í˜¹ì— ë¹ ì§ˆ ìˆ˜ ìˆìŒ.

.footnote[.text[ë‘ë²ˆì§¸ í° ì°¨ì´ì ì€ GitLabCIëŠ” Self-hosted gitlab-runner ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ì§€ë§Œ CircleCIëŠ” SaaSí˜•íƒœë¡œë§Œ ì œê³µë˜ì–´ ìœ ì €ê°€ ìì›ì„ ê´€ë¦¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤]]

---

# Available Executor

## GitLabCI
- Shell (Bash / Windows Batch / PowerShell)
- Parallels / VirtualBox (Windows, Linux, macOS or FreeBSD)
- Docker
- Docker Machine (auto-scaling)
- Kubernetes
- SSH
- Custom

## CircleCI
- Within Docker images (docker)
- Within a Linux virtual machine (VM) image (machine)
- Within a macOS VM image (macos)
- Within a windows VM image (windows)

.footnote[.text[ê³µí†µì ìœ¼ë¡œ docker, shell(machine) executorë¥¼ ì§€ì›í•˜ë©°, GitLabCIê°€ Custom executor ë“± ë” ë§ì€ í™˜ê²½ì„ ì§€ì›í•©ë‹ˆë‹¤]]

---

# Config file

## GitlabCI
- Default, `<projectRoot>/.gitlab-ci.yml`
- https://docs.gitlab.com/ee/ci/yaml/
- https://gitlab.com/help/ci/yaml/README.md
- Custom CI configuration path
    - `my/path/.gitlab-ci.yml`
    - `http://example.com/generate/ci/config.yml`
    - `my/path/.my-custom-file.yml@mygroup/another-project`
    - https://docs.gitlab.com/ee/user/project/pipelines/settings.html#custom-ci-configuration-path

## CircleCI
- `<projectRoot>/.circleci/config.yml`
- https://circleci.com/docs/2.0/configuration-reference/

.footnote[.text[ëª¨ë‘ yml ì»¨í”¼ê·¸ íŒŒì¼ì„ ì‚¬ìš©í•˜ë©°, GitLabCIëŠ” Custom path ì„¤ì •ì„ í†µí•´ ì™¸ë¶€ì˜ ymlíŒŒì¼ì„ ì‚¬ìš© í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤]]

---

# Auto completion & validation check

![](./img/auto-complete.png)

http://schemastore.org/json/

.footnote[.text[ë‘ ì†”ë£¨ì…˜ ëª¨ë‘ VS Codeë“±ì˜ ì—ë””í„°ë¥¼ í†µí•´ ì»¨í”¼ê·¸ íŒŒì¼ ì‘ì„±ì‹œ ìë™ì™„ì„±, ë°¸ë¦¬ë°ì´ì…˜ ì²´í¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤]]

---

class: scroll

# lint

## GitLabCI

```
https://gitlab.com/<namespace>/<projectName>/-/ci/lint
```

```
https://gitlab.com/help/api/lint.md
```

![](./img/ci-lint-button.png)
![](./img/ci-lint-result.png)

## CircleCI

```
$ brew install circleci
$ circleci config validate
Config file at .circleci/config.yml is valid.
```

```
$ circleci config validate
Error: ERROR IN CONFIG FILE:
[#] required key [jobs] not found
```

.footnote[.text[GitLabCIëŠ” WebUIì™€ APIë¥¼ í†µí•´ lintë¥¼ ì œê³µí•˜ê³  CircleCIëŠ” CLI ëª…ë ¹ì–´ë¥¼ í†µí•´ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤]]

---

# GitLabCI to CircleCI Migration docs

https://circleci.com/docs/2.0/migrating-from-gitlab/

![](./img/script-basic.png)

.footnote[.text[ê¸°ë³¸ì ì¸ ìŠ¤í¬ë¦½íŠ¸ êµ¬ì¡°ì˜ ì°¨ì´ëŠ” CircleCI ê³µì‹ ë¬¸ì„œì—ì„œ ì„¤ëª…í•˜ê³  ìˆìŠµë‹ˆë‹¤]]

---

# Hello world

## GitLabCI

```
some-job-name:
  script: echo "Hello world"
```

## CircleCI

```
version: 2
jobs:
  build:
    docker:
      - image: circleci/ruby:2.7.0
    steps:
      - checkout
      - run: echo "Hello world"
```

.footnote[.text[ë¹Œë“œì˜ ì‹¤í–‰ ë‹¨ìœ„ëŠ” ëª¨ë‘ job ì´ë¼ê³  í•©ë‹ˆë‹¤. GitLabCIì—ì„œëŠ” ì„œë²„ì˜ ë²„ì „ë„ ëª…ì‹œí•©ë‹ˆë‹¤]]

---

# Docker image

## GitLabCI

```
some-job-name:
  image: ruby:2.7.0
  script: echo "Hello world"
```

ë˜ëŠ”

```
image: ruby:2.7.0
some-job-name:
  script: echo "Hello world"
```

## CircleCI

```
jobs:
  build:
    docker:
      - image: circleci/ruby:2.7.0
    steps:
      - checkout
      - run: echo "Hello world"
```

.footnote[.text[CircleCIì—ì„œëŠ” jobë§ˆë‹¤ docker ì†ì„±ì„ ëª…ì‹œí•´ì•¼í•˜ì§€ë§Œ GitLabCIì—ì„œëŠ” ëª¨ë“  jobì— ì ìš©ë˜ëŠ” í•˜ë‚˜ì˜ ì„¤ì •ì„ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤]]

---

# Multi job

## GitLabCI

```
job1:
  stage: build
  script: make build dependencies

job2:
  stage: build
  script: make build artifacts

job3:
  stage: test
  script: make test

job4:
  stage: deploy
  script: make deploy

stages:
  - build
  - test
  - deploy
```

## CircleCI

```
version: 2
jobs:
  job1:
    steps:
      - checkout
      - run: make build dependencies
  job2:
    steps:
      - run: make build artifacts
  job3:
    steps:
      - run: make test
  job4:
    steps:
      - run: make deploy

workflows:
  version: 2
  jobs:
    - job1
    - job2
    - job3:
        requires:
          - job1
          - job2
    - job4:
        requires:
          - job3

```

---

# unit test result

---

# artifacts, persist

---

.left-half[
  ![pet](./img/ramiz-dedakovic-9SWHIgu8A8k-unsplash.jpg)
  .center[**Stateful**]
]

.right-half[
  ![cattle](./img/james-wainscoat-DhU7XRg-Ygc-unsplash.jpg)
  .center[**Stateless**]
]

.top-right-copyright[
- Photo by Ramiz DedakoviÄ‡ on Unsplash
- Photo by James Wainscoat on Unsplash
]

.footnote[.text[Stateful, Stateless ìì›ì„ ì„¤ëª…í•˜ê¸° ìœ„í•´ Pet, Cattle ë¹„ìœ ëŠ” ìì£¼ ë“±ì¥í•©ë‹ˆë‹¤]]

---

# Cold start problem

.margin-top-1em.center[![serverless-price](./img/1_sUi1ffuIDGsqVU5pcyGMEw.png)]

.footnote[.text[ìƒˆë¡œìš´ í•¨ìˆ˜ ì‹¤í–‰ í™˜ê²½ ì´ˆê¸°í™”ë¡œ ì¸í•œ ë¦´ë ˆì´ë¥¼ Cold start ë¼ê³  í•©ë‹ˆë‹¤]]

---

class: page-group-reference

### References
- https://www.youtube.com/watch?v=s8DCpG1PeaU
- https://about.gitlab.com/company/history/
- https://about.gitlab.com/releases/
- https://gitlab.com/gitlab-org/gitlab-foss/blob/master/changelogs/archive.md
- https://about.gitlab.com/releases/2015/09/22/gitlab-8-0-released/
- https://ilya.puchka.me/parametrised-jobs-in-circleci/
- https://about.gitlab.com/devops-tools/circle-ci-vs-gitlab.html

- https://circleci.com/server/changelog/
- https://circleci.com/docs/2.0/migrating-from-gitlab/
- https://circleci.com/docs/2.0/circleci-images/
- https://circleci.com/docs/2.0/configuration-reference/


---

class: middle, center

# ğŸ™ Thank you ğŸ™‡

    </textarea>
    <div id="timerBox">
      <div id="timer"></div>
      <div id="start">start</div>
    </div>
    <script src="./js/remark-latest.min.js"></script>
    <script src="./js/user.js"></script>
  </body>
</html>
