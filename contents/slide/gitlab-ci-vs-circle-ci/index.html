<!DOCTYPE html>
<html>
  <head>
    <title>gitlabci-vs-circleci</title>
    <meta charset="utf-8">
    <meta property="og:url" content="https://b6pzeusbc54tvhw5jgpyw8pwz2x6gs.github.io/slide-serverless"/>
    <meta property="og:title" content="gitlabci-vs-circleci" />
    <meta property="og:type" content="website" />
    <meta property="og:description" content="gitlabci vs circleci" />
    <link href="./css/Lato-Nanum-Gothic.css" rel="stylesheet">
    <link href="./css/Yanone-Kaffeesatz.css" rel="stylesheet">
    <link href="./css/Droid-Serif-400-700-400italic.css" rel="stylesheet">
    <link href="./css/Ubuntu-Mono-400-700-400italic.css" rel="stylesheet">
    <link href="./css/notosanskr.css" rel="stylesheet">
    <link href="./css/user.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <textarea id="source">

layout: false

class: page-10

## ê²°ì •í•˜ê¸° ì „ ì•Œì•„ì•¼ í•  ë””í…Œì¼,
### GitLabCI vs CircleCI

.logo-wrapper.right.right-bottom.list-unstyled[
- [https://aluc.io](https://aluc.io)
- [me@aluc.io](mailto:me@aluc.io)
]

---

# Who am I

```
- nickname: aluc
- name:
    ko: ìœ  ë³‘í™”
    en: Alfreduc You
- job:
    - ì„œë²„ ê°œë°œ
    - Web Frontend ê°œë°œ
    - Cloud Native Application ê°œë°œ
- blog: https://aluc.io/
- I like ${ }
    - MacOS > Ubuntu >>> Windows
    - Stateless > Stateful
    - Serverless > Container >>> other
    - IaS >>> Web Console
    - React > Vue > Angular
    - typescript >> javascript
    - Slack > Mattermost
    - Automatic Car > Manual Car
    - VS Code > Vim >>> Eclipse
    - gitlab > github
    - CircleCI > GitlabCI > Jenkins
```

---

# TOC

- Public information on the internet
- GitLabCI and CircleCI
- Architecture
- VM or Physical Server Management
- Available Executor
- Config file
- Auto completion & validation check
- lint

- Hello world
- Docker image
- Multiple jobs
- Cache
- Artifacts
- Share Data Among Jobs
- Unit test result
- Linked project
- Protected variables, security
- Debugging
- Web UI
- Wrting scripts - yaml anchors
- Wrting scripts - environments

- References

---

class: scroll

# Public information on the internet

- Google trend: https://trends.google.com/trends/explore?q=gitlab%20ci,circleci

- stackshare: https://stackshare.io/stackups/circleci-vs-gitlab

- CircleCI's GitLabCI to CircleCI Migration:
    - https://circleci.com/docs/2.0/migrating-from-gitlab/

- GitLab's CircleCI vs. GitLab
    - https://about.gitlab.com/devops-tools/circle-ci-vs-gitlab.html

.footnote[.text[ì¸í„°ë„·ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆëŠ” ë‘ ì†”ë£¨ì…˜ì˜ ë¹„êµ ì •ë³´ ì…ë‹ˆë‹¤]]

---

# GitLabCI and CircleCI

## GitlabCI
- With GitLab - https://gitlab.com/gitlab-org/gitlab-runner
- SaaS and Enterprise, Self-Managed
- 2011: Start of GitLab
- 2012ë…„ 11ì›” November first version of GitLab CI
- Big Breaking Change: 2015ë…„ 9ì›” 22ì¼ GitLab 8.0 ë¶€í„° GitLab í”„ë¡œì íŠ¸ì™€ í†µí•©

## CircleCI
- Support github, github enterprise, bitbucket
- Saas and Enterprise
- 2016ë…„ 5ì›” 12ì¼ 0.2.36 release
- Big Breaking Change: 2017ë…„ 9ì›” 6ì¼ 2.0 ë²„ì „ release

.footnote[.text[GitLbCIì™€ CircleCIë¥¼ ì†Œê°œí•©ë‹ˆë‹¤]]

---

class: scroll

# Architecture

# GitLabCI ì•„í‚¤í…ì³
![](./img/ci-cd-architecture_2x.png)

# CircleCI ì•„í‚¤í…ì³
![](./img/ccie_arch.png)

.footnote[.text[GitLabCIëŠ” polling ë°©ì‹, CircleCIëŠ” github application í˜•íƒœì˜ webhook ë°©ì‹ìœ¼ë¡œ ë™ì‘í•©ë‹ˆë‹¤]]

---

class: scroll

# VM or Physical Server Management

## GitLabCI
- Shared Runners: Managed by system admin
- Group Runners, Specific Runners: Self-hosted
- Self-hosted ë°©ì‹ì„ ì‚¬ìš©í•˜ë©´,
    - gitlab-runnerê°€ êµ¬ë™ë˜ëŠ” VMì´ë‚˜ ë¬¼ë¦¬ë¨¸ì‹ ì„ ê´€ë¦¬í•´ì•¼í•¨.
    - gitlab-runnerë¥¼ ê´€ë¦¬í•´ì•¼í•¨: DinD, DooD, private registry ë“±
- `tags` í”„ë¡œí¼í‹°ë¥¼ í†µí•´ ëŸ¬ë„ˆë¥¼ ì„ íƒ. ìŠ¤í¬ë¦½íŠ¸ ì‘ì„±ìê°€ ëŸ¬ë„ˆ êµ¬ì„±ì„ ì•Œì•„ì•¼í•¨.

## CircleCI
- GitHub, CircleCI ëª¨ë‘ system admin ì´ ë‹´ë‹¹.
- ê°œë°œìê°€ Self-hostedë¡œ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” VMì´ë‚˜ ë¬¼ë¦¬ë¨¸ì‹ ì´ ì—†ìŒ.

## Thinking
- ìŠ¬ë¼ì´ë“œì—ì„œëŠ” ì„œë²„ ê°œë°œìë¡œì„œ gitlab-ci Self-hosted runners ì‚¬ìš© ê²½í—˜ì„ ê¸°ì¤€ìœ¼ë¡œ ë¹„êµ.
- Self-hosted ë¨¸ì‹  ì‚¬ìš©ì€ ì»¤ìŠ¤í„°ë§ˆì´ì§•ì´ ê°€ëŠ¥í•˜ì—¬ ê°€ëŠ¥ì„±ì´ ë¬´ê¶ ë¬´ì§„í•˜ë‹¤ëŠ” ì¥ì ì´ ìˆì§€ë§Œ,
- ìš´ì˜íŒ€ì´ ì•„ë‹Œ ì¼ë°˜ ê°œë°œìê°€ gitlab-runnerë¥¼ ì²´ê³„ì ìœ¼ë¡œ ì˜ ê´€ë¦¬í•´ë³´ê³  ì‹¶ì€ ìœ í˜¹ì— ë¹ ì§ˆ ìˆ˜ ìˆìŒ.

.footnote[.text[GitLabCIëŠ” Self-hosted gitlab-runner ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ì§€ë§Œ CircleCIëŠ” SaaSí˜•íƒœë¡œë§Œ ì œê³µë˜ì–´ ìœ ì €ê°€ ìì›ì„ ê´€ë¦¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤]]

---

# Available Executor

## GitLabCI
- Shell (Bash / Windows Batch / PowerShell)
- Parallels / VirtualBox (Windows, Linux, macOS or FreeBSD)
- Docker
- Docker Machine (auto-scaling)
- Kubernetes
- SSH
- Custom

## CircleCI
- Within Docker images (docker)
- Within a Linux virtual machine (VM) image (machine)
- Within a macOS VM image (macos)
- Within a windows VM image (windows)

.footnote[.text[ê³µí†µì ìœ¼ë¡œ docker, shell(machine) executorë¥¼ ì§€ì›í•˜ë©°, GitLabCIê°€ Custom executor ë“± ë” ë§ì€ í™˜ê²½ì„ ì§€ì›í•©ë‹ˆë‹¤]]

---

# Config file

## GitlabCI
- Default, `<projectRoot>/.gitlab-ci.yml`
- https://docs.gitlab.com/ee/ci/yaml/
- https://gitlab.com/help/ci/yaml/README.md
- Custom CI configuration path
    - https://docs.gitlab.com/ee/user/project/pipelines/settings.html#custom-ci-configuration-path
    - `my/path/.gitlab-ci.yml`
    - `my/path/.my-custom-file.yml@mygroup/another-project`
    - `http://example.com/generate/ci/config.yml`
- include: https://docs.gitlab.com/ee/ci/yaml/#include

## CircleCI
- `<projectRoot>/.circleci/config.yml`
- https://circleci.com/docs/2.0/configuration-reference/
- orbs, command, parameter, executors ê¸°ëŠ¥ì´ 2.1 ë²„ì „ì— ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.
- But í˜„ì¬ CircleCI Enterprise ì—ì„œëŠ” 2.1 ê¸°ëŠ¥ì„ ì‚¬ìš© í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤.
    - `circleci config process` ëª…ë ¹ì–´ë¥¼ í†µí•´ 2.0 ë²„ì „ìœ¼ë¡œ ë³€í™˜í•˜ì—¬ ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - https://circleci.com/docs/2.0/local-cli/#processing-a-config
- [fyaml](https://github.com/CircleCI-Public/fyaml)ì„ ì‚¬ìš©í•˜ì—¬ ë³„ë„ íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ì—¬ configë¥¼ ì‘ì„±í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

.footnote[.text[ëª¨ë‘ yml ì»¨í”¼ê·¸ íŒŒì¼ì„ ì‚¬ìš©í•˜ë©°, GitLabCIëŠ” Custom path ì„¤ì •ì„ í†µí•´ ì™¸ë¶€ì˜ ymlíŒŒì¼ì„ ì‚¬ìš© í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤]]
.footnote2[.text[ë°˜ë©´ì— CircleCIëŠ” 2.1ë²„ì „ì— orbs, commands, parameters, executors ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì–´ ë‚´ë¶€, ì™¸ë¶€ì˜ ì½”ë“œë¥¼ í¸ë¦¬í•˜ê²Œ ì¬ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤]]

---

# Auto completion & validation check

![](./img/auto-complete.png)

http://schemastore.org/json/

.footnote[.text[ë‘ ì†”ë£¨ì…˜ ëª¨ë‘ VS Codeë“±ì˜ ì—ë””í„°ë¥¼ í†µí•´ ì»¨í”¼ê·¸ íŒŒì¼ ì‘ì„±ì‹œ ìë™ì™„ì„±, ë°¸ë¦¬ë°ì´ì…˜ ì²´í¬ë¥¼ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤]]

---

class: scroll

# lint

## GitLabCI

```
https://gitlab.com/<namespace>/<projectName>/-/ci/lint
```

```
https://gitlab.com/help/api/lint.md
```

![](./img/ci-lint-button.png)
![](./img/ci-lint-result.png)

## CircleCI

```
$ brew install circleci
$ circleci config validate
Config file at .circleci/config.yml is valid.
```

```
$ circleci config validate
Error: ERROR IN CONFIG FILE:
[#] required key [jobs] not found
```

.footnote[.text[GitLabCIëŠ” WebUIì™€ APIë¥¼ í†µí•´ lintë¥¼ ì œê³µí•˜ê³  CircleCIëŠ” CLI ëª…ë ¹ì–´ë¥¼ í†µí•´ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤]]

---

# Hello world

## GitLabCI

```
some-job-name:
  script: echo "Hello world"
```

## CircleCI

```
version: 2
jobs:
  build:
    docker:
      - image: circleci/ruby:2.7.0
    steps:
      - checkout
      - run: echo "Hello world"
```

.footnote[.text[ë¹Œë“œì˜ ì‹¤í–‰ ë‹¨ìœ„ëŠ” ëª¨ë‘ job ì´ë¼ëŠ” ìš©ì–´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. CircleCIì—ì„œëŠ” ì»¨í”¼ê·¸ ë²„ì „ë„ ëª…ì‹œí•´ì•¼í•©ë‹ˆë‹¤]]

---

# Docker image

## GitLabCI

```
some-job-name:
  image: ruby:2.7.0
  script: echo "Hello world"
```

ë˜ëŠ”

```
image: ruby:2.7.0
some-job-name:
  script: echo "Hello world"
```

## CircleCI

```
jobs:
  build:
    docker:
      - image: circleci/ruby:2.7.0
    steps:
      - checkout
      - run: echo "Hello world"
```

- https://circleci.com/docs/2.0/circleci-images/

.footnote[.text[CircleCIì—ì„œëŠ” jobë§ˆë‹¤ docker ì†ì„±ì„ ëª…ì‹œí•´ì•¼í•˜ì§€ë§Œ GitLabCIì—ì„œëŠ” ëª¨ë“  jobì— ì ìš©ë˜ëŠ” í•˜ë‚˜ì˜ ì„¤ì •ì„ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤]]

---

# Multiple jobs

## GitLabCI

```
job1:
  stage: build
  script: make build dependencies

job2:
  stage: build
  script: make build artifacts

job3:
  stage: test
  script: make test

job4:
  stage: deploy
  script: make deploy

stages:
  - build
  - test
  - deploy
```

## CircleCI

```
version: 2
jobs:
  job1:
    steps:
      - checkout
      - run: make build dependencies
  job2:
    steps:
      - run: make build artifacts
  job3:
    steps:
      - run: make test
  job4:
    steps:
      - run: make deploy

workflows:
  version: 2
  jobs:
    - job1
    - job2
    - job3:
        requires:
          - job1
          - job2
    - job4:
        requires:
          - job3

```

.footnote[.text[GitLabCIì—ì„œëŠ” stageë¥¼ ì‚¬ìš©í•˜ê³ , CircleCIì—ì„œëŠ” workflowsë¥¼ ì‚¬ìš©í•´ì„œ ìˆœì°¨ì  í˜¹ì€ ë³‘ë ¬ë¡œ ì‹¤í–‰ë˜ëŠ” ë¹Œë“œ íŒŒì´í”„ë¼ì¸ì„ êµ¬ì„± í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤]]

---

# Cache

## GitLabCI

```
image: node:latest

# Cache modules in between jobs
cache:
  key: ${CI_COMMIT_REF_SLUG}
  paths:
    - node_modules/

before_script:
  - npm install

test_async:
  script:
    - node ./specs/start.js ./specs/async.spec.js
```

## CircleCI

```
jobs:
  job1:
    steps:
      - checkout
      - restore_cache:
          key: source-v1-< .Revision >

      - run: npm install

      - save_cache:
          key: source-v1-< .Revision >
          paths:
            - "node_modules"
```

- https://circleci.com/blog/build-cicd-piplines-using-docker/

.footnote[.text[GitLabCIì—ì„œëŠ” ì‹¤í–‰ì „ê³¼ ì‹¤í–‰í›„ì—ë§Œ ê°ê° ìºì‹œ restore, save ë¥¼ í•  ìˆ˜ ìˆì§€ë§Œ]]
.footnote2[.text[CircleCIì—ì„œëŠ” restore_cache, save_cache stepì„ ë¹Œë“œ ìˆ˜í–‰ì¤‘ì— ì–¸ì œë¼ë„ ì‚¬ìš© ê°€ëŠ¥í•˜ê³  cache keyë¥¼ ì •í•  ë•Œ checksumí•¨ìˆ˜ ë“±ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ templateì„ ì§€ì›í•©ë‹ˆë‹¤]]

---

# Artifacts

## GitLabCI
https://docs.gitlab.com/ee/ci/yaml/#artifacts

## CircleCI
https://circleci.com/docs/2.0/configuration-reference/#store_artifacts

.footnote[.text[ê° jobì˜ ì‚°ì¶œë¬¼ì„ ì—…ë¡œë“œí•´ì„œ WebUIë‚˜ APIë¥¼ í†µí•´ ë‹¤ìš´ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤]]

---

# Share Data Among Jobs

## GitLabCI
https://docs.gitlab.com/ee/ci/yaml/README.html#dependencies

## CircleCI
https://circleci.com/docs/2.0/configuration-reference/#persist_to_workspace

.footnote[.text[GitLabCIì€ ê¸°ë³¸ì ìœ¼ë¡œ ë°”ë¡œ ì´ì „ stageì˜ artfactsë“¤ì„ jobì‹¤í–‰ ì „ ëª¨ë‘ ë‚´ë ¤ë°›ìŠµë‹ˆë‹¤. dependenciesë¥¼ ëª…ì‹œí•´ì„œ default ë™ì‘ì„ ì œì–´ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤]]
.footnote2[.text[CircleCIì—ì„œëŠ” persist_to_workspace, attach_workspaceë¥¼ ì§ì ‘ ëª…ì‹œí•´ì•¼í•©ë‹ˆë‹¤. ì—­ì‹œ stepìœ¼ë¡œ ì‚¬ìš©í•©ë‹ˆë‹¤]]

---

# Unit test result

## GitLabCI
https://docs.gitlab.com/ee/ci/yaml/#coverage
- coverage % ë¥¼ ì–»ì„ ìˆ˜ ìˆëŠ” ì •ê·œì‹ì„ ì œê³µí•˜ê³  coverage % ë¥¼ í‘œì‹œí•´ì£¼ëŠ” badgeë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## CircleCI
https://circleci.com/docs/2.0/configuration-reference/#store_test_results
- store_test_results ì†ì„±ì„ ì¶”ê°€í•˜ë©´ WebUIë¥¼ í†µí•´ Unit test summaryë¥¼ í™•ì¸ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- coverage % ë±ƒì§€ë¥¼ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” https://coveralls.io/ ê°™ì€ ë³„ë„ì˜ SaaSë¥¼ ì‚¬ìš©í•´ì•¼í•©ë‹ˆë‹¤.
- example: https://github.com/aluc-io/tweening-js

.footnote[.text[GitLabCIì—ì„œëŠ” coverage % ë±ƒì§€ë¥¼ ì œê³µí•˜ê³  CircleCIì—ì„œëŠ” Unit test summaryë¥¼ ì œê³µí•©ë‹ˆë‹¤]]

---

# Linked project

## GitLabCI
https://docs.gitlab.com/ee/ci/multi_project_pipelines.html

## CircleCI
- APIë¥¼ ì‚¬ìš©í•´ì„œ ì—°ê²°ëœ í”„ë¡œì íŠ¸ì˜ Artifactsë¥¼ ë‚´ë ¤ ë°›ê±°ë‚˜
- git submoduleì„ ì‚¬ìš©í•´ì•¼ í•©ë‹ˆë‹¤.

.footnote[.text[CircleCIì—ì„œëŠ” APIë¥¼ ì‚¬ìš©í•˜ê±°ë‚˜ git submoduleì„ ì‚¬ìš©í•´ì•¼ í•˜ì§€ë§Œ GitLabCIì—ì„œëŠ” Configure ë ˆë²¨ì—ì„œ ì§€ì›í•©ë‹ˆë‹¤]]

---

# Protected variables, security

## GitLabCI
https://docs.gitlab.com/ee/ci/variables/#protected-environment-variables
- https://docs.gitlab.com/ee/user/permissions.html
- https://docs.gitlab.com/ee/user/project/new_ci_build_permissions_model.html
- CircleCIë³´ë‹¤ ë‹¤ì–‘í•œ ë‹¨ê³„ì˜ permissionì´ ìˆê³  gitlab-ciì˜ ê¶Œí•œì€ ë¹Œë“œë¥¼ triggerí•œ ìœ ì €ì˜
  ê¶Œí•œì„ ë”°ë¼ê°€ì„œ ì—°ê²°ëœ ì €ì¥ì†Œì— ì ‘ê·¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
- ë³„ë„ì˜ protected variablesì€ protected branchì˜ ë¹Œë“œì‹œì—ë§Œ ì£¼ì…ë©ë‹ˆë‹¤.

## CircleCI
- Githubì˜ permissionì¸ read, write, admin ë ˆë²¨ì„ ì‚¬ìš©í•©ë‹ˆë‹¤.
- read ê¶Œí•œìœ¼ë¡œëŠ” CircleCIì˜ ë¹Œë“œ ë¡œê·¸ë“±ì„ ì¡°íšŒí•  ìˆ˜ ìˆì§€ë§Œ retryë¥¼ í•  ìˆ˜ ì—†ê³ ,

.footnote[.text[GitLabê³¼ GitHubì´ ë°œì „í•´ì˜¨ ëª¨ìŠµì— ë”°ë¼ GitLabì€ Enterpriseí™˜ê²½ì— ìµœì í™”ëœ ëª¨ìŠµì´ê³  GitHubì€ ì˜¤í”ˆì†ŒìŠ¤ í”„ë¡œì íŠ¸ì— ìµœì í™”ëœ ëª¨ì–‘ì…ë‹ˆë‹¤]]

---

# Debugging

## GitLabCI
- gitlab-runnerì˜ `exec` ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•´ ë¡œì»¬ì—ì„œ jobì„ ì‹¤í–‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    - https://docs.gitlab.com/runner/commands/#limitations-of-gitlab-runner-exec
- 11.3 ë²„ì „ì— Interactive Web Terminals ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.
    - https://docs.gitlab.com/ee/ci/interactive_web_terminal/
    - gitlabê³¼ gitlab-runnerì˜ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤.

## CircleCI
- CLIì˜ `local` ì»¤ë§¨ë“œë¥¼ ì‚¬ìš©í•´ ë¡œì»¬ì—ì„œ jobì„ ì‹¤í–‰ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- `rerun with ssh` ë²„íŠ¼ì„ ì‚¬ìš©í•´ì„œ ë¹Œë“œê°€ ë˜ê³  ìˆëŠ” ì»¨í…Œì´ë„ˆì— ì ‘ì† í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- Configure tabì—ì„œ config.yml í˜•ìƒì„ ë°”ë¡œ í™•ì¸í•´ 

.footnote[.text[ë””ë²„ê¹… ê²½í—˜ì€ CircleCIì˜ `rerun with ssh`ê°€ ì••ë„ì ìœ¼ë¡œ ì¢‹ì•˜ìŠµë‹ˆë‹¤]]

---

# Web UI

## GitLabCI
- ì˜ˆì©ë‹ˆë‹¤.
- script ëª…ë ¹ì–´ë³„ë¡œ log fold ë‚˜ duration time í‘œì‹œê°€ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

## CircleCI
- ì˜ˆì˜ì§€ë§Œ approve type jobì´ í•˜ë‚˜ì˜ jobìœ¼ë¡œ ì¡´ì¬í•˜ëŠ”ê²Œ ì–´ìƒ‰í•˜ê³ 
- ë³‘ë ¬ ì‹¤í–‰ jobê°„ì˜ ìˆœì„œê°€ ë§¤ë²ˆ ë³€ê²½ë˜ëŠ” ë²„ê·¸ê°€ ìˆìŠµë‹ˆë‹¤.
- stepë‹¨ìœ„ë¡œ logë¥¼ ë³¼ ìˆ˜ ìˆê³  duration time í‘œì‹œë„ ë˜ì–´ ìµœì í™”ë¥¼ í•˜ê¸° ì¢‹ìŠµë‹ˆë‹¤.

.footnote[.text[CircleCIì˜ ìµœì‹  UIê°€ í…ŒìŠ¤íŠ¸ ì¤‘ì…ë‹ˆë‹¤]]

---

# Wrting scripts - yaml anchors

## GitLabCI
- `script` ì˜ íƒ€ì…ì´ `string` `string[]` ì´ê¸° ë•Œë¬¸ì— ì¼ë¶€ë¶„ë§Œ anchors ì„¤ì •ì„ í•  ìˆ˜ ì—†ì—†ìŠµë‹ˆë‹¤.
- GitLabCIì—ì„œë„ 12.5 ë²„ì „ë¶€í„° scriptì‘ì„±ì‹œ `string[][]` íƒ€ì…ì„ í—ˆìš©í•˜ë©´ì„œ yaml anchorsë¥¼ ì‚¬ìš© í•  ìˆ˜ ìˆê²Œë˜ì—ˆìŠµë‹ˆë‹¤.
- https://docs.gitlab.com/ee/ci/yaml/#yaml-anchors-for-script
- [Hidden keys](https://docs.gitlab.com/ee/ci/yaml/#hidden-keys-jobs) ì„¤ì •ì„ í†µí•´ anchors ì •ì˜ë¥¼ ì‰½ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## CircleCI
- step ë‹¨ìœ„ë¡œ yaml anchors, alias ì„¤ì •ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- workflowì—ì„œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” jobì„ í•˜ë‚˜ ë§Œë“¤ì–´ ë‘ê³  anchors ì •ì˜ì— ì‚¬ìš©í•˜ë©´ ì¢‹ìŠµë‹ˆë‹¤.

.footnote[.text[ë°˜ë³µì„ ì¤„ì´ê¸° ìœ„í•´ yaml anchors ê¸°ëŠ¥ì„ ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤]]

---

# Wrting scripts - environments

.left-half[
  ## GitLabCI
  - ì „ì—­, job ë²”ìœ„ë¡œ variables í”„ë¡œí¼í‹°ë¥¼ í†µí•´ í™˜ê²½ë³€ìˆ˜ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” í™˜ê²½ë³€ìˆ˜ëŠ” scriptì‹¤í–‰ ë‚´ë‚´ ê³µìœ ë©ë‹ˆë‹¤.
]

.right-half[
  ## CircleCI
  - job, step ë²”ìœ„ë¡œ environment í”„ë¡œí¼í‹°ë¥¼ í†µí•´ í™˜ê²½ë³€ìˆ˜ë¥¼ ì£¼ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  - ë™ì ìœ¼ë¡œ ë§Œë“¤ì–´ì§€ëŠ” í™˜ê²½ë³€ìˆ˜ëŠ”,
      - ë§¤ stepì€ ìƒˆë¡œìš´ ì‰˜ ì‹¤í–‰ í™˜ê²½ì´ë¯€ë¡œ stepê°„ì˜ íŒŒì¼ì€ ê³µìœ ë˜ì§€ë§Œ í™˜ê²½ë³€ìˆ˜ëŠ” ê³µìœ ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.
      - stepê°„ í™˜ê²½ë³€ìˆ˜ë¥¼ ê³µìœ í•˜ê¸° ìœ„í•´ì„œëŠ”, [BASH_ENV](https://circleci.com/docs/2.0/env-vars/#using-bash_env-to-set-environment-variables)ë¥¼ ì‚¬ìš© í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
]

.footnote[.text[ìŠ¤í¬ë¦½íŠ¸ê°€ ë³µì¡í•´ì§€ë©´ í™˜ê²½ë³€ìˆ˜ ê´€ë¦¬ê°€ ì¤‘ìš”í•©ë‹ˆë‹¤. ë™ì ìœ¼ë¡œ í™˜ê²½ë³€ìˆ˜ê°€ ìƒì„±ë  ë•Œ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤]]

---

.left-half[
  ![pet](./img/ramiz-dedakovic-9SWHIgu8A8k-unsplash.jpg)
  .center[**Stateful**]
]

.right-half[
  ![cattle](./img/james-wainscoat-DhU7XRg-Ygc-unsplash.jpg)
  .center[**Stateless**]
]

.top-right-copyright[
- Photo by Ramiz DedakoviÄ‡ on Unsplash
- Photo by James Wainscoat on Unsplash
]

.footnote[.text[Stateful, Stateless ìì›ì„ ì„¤ëª…í•˜ê¸° ìœ„í•´ Pet, Cattle ë¹„ìœ ëŠ” ìì£¼ ë“±ì¥í•©ë‹ˆë‹¤]]

---

class: page-group-reference

### References
- https://www.youtube.com/watch?v=s8DCpG1PeaU
- https://about.gitlab.com/company/history/
- https://about.gitlab.com/releases/
- https://gitlab.com/gitlab-org/gitlab-foss/blob/master/changelogs/archive.md
- https://about.gitlab.com/releases/2015/09/22/gitlab-8-0-released/
- https://ilya.puchka.me/parametrised-jobs-in-circleci/
- https://about.gitlab.com/devops-tools/circle-ci-vs-gitlab.html
- https://about.gitlab.com/devops-tools/

- https://circleci.com/server/changelog/
- https://circleci.com/docs/2.0/migrating-from-gitlab/
- https://circleci.com/docs/2.0/circleci-images/
- https://circleci.com/docs/2.0/configuration-reference/


---

class: middle, center

# ğŸ™ Thank you ğŸ™‡

    </textarea>
    <div id="timerBox">
      <div id="timer"></div>
      <div id="start">start</div>
    </div>
    <script src="./js/remark-latest.min.js"></script>
    <script src="./js/user.js"></script>
  </body>
</html>
